<div class="relative min-h-screen w-full flex items-center justify-center overflow-hidden transition-all duration-500" [ngClass]="bgColor">

  <ng-lottie 
    *ngIf="isDefault" 
    class="absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 w-[130vw] h-[130vh]" 
    [options]="lottieOptions">
  </ng-lottie>

  <ng-lottie 
    *ngIf="!isDefault" 
    class="absolute top-0 left-0 w-full h-full" 
    [options]="lottieOptions">
  </ng-lottie>

  <div class="relative z-10 w-full max-w-xl px-8 py-10 flex flex-col items-center gap-8 bg-transparent border border-white/30 rounded-3xl shadow-2xl">

    <h1
      class="text-4xl font-extrabold text-transparent bg-clip-text bg-gradient-to-r from-[#1e1e2f] via-[#3b3b4f] to-[#2b2b3f] animate-[shimmer_6s_linear_infinite]">
      AI Vibe Coach
    </h1>

    <textarea [(ngModel)]="moodText" placeholder="How are you feeling today?"
      class="w-full resize-none rounded-2xl border-2 border-white/40 px-5 py-4 text-lg text-white placeholder:text-white/70 bg-transparent focus:outline-none focus:border-purple-400 focus:ring-2 focus:ring-purple-300 transition-all duration-300">
    </textarea>

    <p class="text-white font-medium text-center">Select your mood</p>

    <div class="flex justify-center gap-6 mt-2 relative">
      <ng-container *ngFor="let e of emojiList">
        <div class="relative flex flex-col items-center group cursor-pointer" (click)="selectEmoji(e.symbol)">
          <span
            class="absolute -top-12 text-sm font-semibold text-white bg-black/60 px-3 py-1 rounded-xl opacity-0 translate-y-2 group-hover:opacity-100 group-hover:translate-y-0 transition-all duration-300 shadow-lg whitespace-nowrap">
            {{ e.label }}
          </span>
          <span
            class="text-5xl text-white transition-transform duration-300 rounded-full p-3 cursor-pointer select-none group-hover:animate-bounce group-hover:scale-110 group-hover:bg-white/20">
            {{ e.symbol }}
          </span>
        </div>
      </ng-container>
    </div>

    <button (click)="analyzeMood()"
      [disabled]="loading"
      class="mt-6 w-full py-3 font-bold rounded-xl shadow-lg hover:scale-105 transition-transform duration-300 cursor-pointer text-white bg-gradient-to-r from-[#1a1a2e] via-[#3d3d5c] to-[#292941] hover:from-[#292941] hover:via-[#4c4c6d] hover:to-[#1a1a2e] border border-white/20">
      Check Your Vibe!
    </button>

  </div>

  <div *ngIf="loading" class="absolute inset-0 bg-black/70 flex items-center justify-center z-50">
    <ng-lottie [options]="loaderOptions" class="w-96 h-96"></ng-lottie>
  </div>

</div>
